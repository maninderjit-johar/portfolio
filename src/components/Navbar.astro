---
import { Image } from "astro:assets";
import Logo from "../images/LOGO.png";
import github from "../images/vCtrl/github-1.svg";
import linkedin from "../images/linkedin-1.svg";
import outlook from "../images/outlook.svg";
---

<nav
  id="navbar"
  class="fixed top-0 left-0 w-full bg-transparent transition-colors duration-300 ease-in-out"
>
  <div class="container mx-auto flex w-full items-center justify-between p-4">
    <!-- Logo and Name -->
    <div class="flex items-center space-x-4">
      <a href="#home" class="nav-link">
        <Image src={Logo} alt="Mani Johar" width={75} />
      </a>
    </div>
    <!-- Navigation Links -->
    <div
      class="hidden md:flex space-x-8 py-4 px-12 bg-black rounded-full middle-nav transition-all ease-in delay-150"
    >
      <a href="#home" class="text-white hover:font-bold nav-link"> Home </a>
      <a href="#tools" class="text-white hover:font-bold nav-link">Tools</a>
      <a href="#work" class="text-white hover:font-bold nav-link">Experiences</a
      >
      <a href="#about" class="text-white hover:font-bold nav-link">About</a>
    </div>
    <div class="hidden md:flex space-x-2">
      <a
        href="mailto:maninderjit.johar@outlook.com"
        class="text-white"
        target="_blank"><Image src={outlook} width={30} alt="Email" /></a
      >
      <a
        href="https://github.com/maninderjit-johar"
        class="text-white hover:text-customTeal"
        target="_blank"><Image src={github} width={30} alt="Github" /></a
      >
      <a
        href="https://www.linkedin.com/in/manijohar/"
        class="text-white hover:text-customTeal"
        target="_blank"><Image src={linkedin} width={30} alt="LinkedIn" /></a
      >
    </div>
    <!-- Hamburger Menu -->
    <button id="menu-btn" class="md:hidden text-white rounded-full">
      <svg
        class="w-5 h-5"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 17 14"
      >
        <path
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M1 1h15M1 7h15M1 13h15"></path>
      </svg>
    </button>
    <!-- Mobile Menu -->
    <div
      id="mobile-menu"
      class="hidden absolute top-full left-0 w-full bg-gray-900 p-4"
    >
      <a href="#home" class="block text-white hover:text-customTeal nav-link"
        >Home</a
      >
      <a
        href="#tools"
        class="mt-2 block text-white hover:text-customTeal nav-link">Tools</a
      >
      <a
        href="#work"
        class="mt-2 block text-white hover:text-customTeal nav-link"
        >Experiences</a
      >
      <a
        href="#about"
        class="mt-2 block text-white hover:text-customTeal nav-link">About</a
      >

      <div class="flex mt-4 gap-4">
        <a
          href="mailto:maninderjit.johar@outlook.com"
          class="text-white"
          target="_blank"><Image src={outlook} width={30} alt="Email" /></a
        >
        <a
          href="https://github.com/maninderjit-johar"
          class="text-white hover:text-customTeal"
          target="_blank"><Image src={github} width={30} alt="Github" /></a
        >
        <a
          href="https://www.linkedin.com/in/manijohar/"
          class="text-white hover:text-customTeal"
          target="_blank"><Image src={linkedin} width={30} alt="LinkedIn" /></a
        >
      </div>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const menuBtn = document.getElementById("menu-btn");
      const mobileMenu = document.getElementById("mobile-menu");
      const navbar = document.getElementById("navbar");
      const heroSection = document.querySelector(".hero-section");
      const middleNav = document.querySelector(".middle-nav");
      const navLinks = document.querySelectorAll(".nav-link");
      const toolSection = document.querySelector("#tools");

      // Toggle mobile menu
      menuBtn.addEventListener("click", () => {
        mobileMenu.classList.toggle("hidden");
      });

      // Change navbar style on scroll
      window.addEventListener("scroll", () => {
        // Calculate the halfway point of the hero section
        const halfwayHero = heroSection.clientHeight / 3;

        if (window.scrollY > halfwayHero) {
          // Add classes for background, border, and text color
          navbar.classList.remove("bg-transparent");
          navbar.classList.add("nav-glass", "text-white");
          middleNav.classList.add("bg-customTeal");
        } else {
          // Remove those classes when not past the point
          //navbar.classList.add("bg-transparent");
          navbar.classList.remove("nav-glass", "text-white");
          middleNav.classList.remove("bg-customTeal");
        }
      });

      navLinks.forEach((link) => {
        link.addEventListener("click", (e) => {
          e.preventDefault();
          const targetId = link.getAttribute("href").substring(1);
          const targetSection = document.getElementById(targetId);

          if (targetSection) {
            const offsetTop =
              targetSection.offsetTop - window.innerHeight * 0.3; // 30% from the top
            window.scrollTo({
              top: offsetTop,
              behavior: "smooth",
            });
          }
        });
      });

      /*    window.scrollToSection = (id) => {
        const section = document.querySelector(`#${id}`);
        if (section) {
          const offsetTop = section.offsetTop - window.innerHeight * 0.3; // Calculate 30% offset from the top
          window.scrollTo({
            top: offsetTop,
            behavior: "smooth",
          });
        }
      }; */

      // Optional: Implement logic to highlight the active link based on the scroll position
      // This part is more complex and depends on your page structure
    });
  </script>
</nav>
